import{t as c}from"./teams-0f7ee716.js";import{x as y,o as n,c as i,a as e,n as v,t as m,F as b,i as w,b as p,e as f}from"./index-621cd5fc.js";import"./http-f1abb376.js";import"./users-a5fc0dd3.js";const _={name:"TeamsView",data(){return{teams:[],loading:!1}},computed:{user(){return JSON.parse(localStorage.getItem("currentUser")||"{}")},userRole(){return this.user.role||"employee"},isAdmin(){return this.userRole==="admin"}},async created(){await this.loadTeams()},methods:{async loadTeams(){var l;try{this.loading=!0;const t=JSON.parse(localStorage.getItem("currentUser")||"{}"),u=t.role||"employee";let r;if(u==="admin"){r=await c.list();const a=r.data||r||[];this.teams=a.filter(o=>{var s;return(s=o.employees)==null?void 0:s.some(d=>d.id===t.id)})}else if(u==="manager"){r=await c.list();const a=r.data||r||[];this.teams=a.filter(o=>{var s,d;return((s=o.manager)==null?void 0:s.id)===t.id||((d=o.employees)==null?void 0:d.some(g=>g.id===t.id))})}else{r=await c.list();const a=r.data||r||[];this.teams=a.filter(o=>{var s;return(s=o.employees)==null?void 0:s.some(d=>d.id===t.id)})}}catch(t){console.error("Error loading teams:",t),(l=this.$toast)==null||l.error("Failed to load teams"),this.teams=[]}finally{this.loading=!1}},canManageTeam(l){return c.canManageTeam(l)},canViewTeamData(l){return c.canViewTeamData(l)}}},k={class:"p-6 max-w-7xl mx-auto bg-white"},T={class:"mb-6"},M=["disabled"],C={key:0,class:"flex justify-center items-center py-12"},V={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},j={class:"p-6"},z={class:"flex items-start justify-between"},B={class:"flex-1"},H={class:"text-lg font-medium text-gray-900 mb-2"},N={key:0,class:"mb-4"},D={class:"flex items-center gap-2"},S={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},L={class:"text-xs font-medium text-blue-600"},R={class:"text-sm font-medium text-gray-900"},U={class:"text-xs text-gray-500"},A={class:"mb-4"},F={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},E={class:"flex flex-wrap gap-2 mt-4"},I=["onClick"],J=["onClick"],O={key:2,class:"text-center py-12"};function G(l,t,u,r,a,o){return n(),i("section",k,[t[8]||(t[8]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Teams"),e("p",{class:"text-gray-600 mt-1"},"Manage your teams and team members")],-1)),e("div",T,[e("button",{onClick:t[0]||(t[0]=(...s)=>o.loadTeams&&o.loadTeams(...s)),disabled:a.loading,class:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50"},[(n(),i("svg",{class:v(["w-4 h-4",{"animate-spin":a.loading}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[1]||(t[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),e("span",null,m(a.loading?"Loading...":"Refresh"),1)],8,M)]),a.loading&&a.teams.length===0?(n(),i("div",C,[...t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)])])):a.teams.length>0?(n(),i("div",V,[(n(!0),i(b,null,w(a.teams,s=>{var d,g,x;return n(),i("div",{key:s.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[e("div",j,[e("div",z,[e("div",B,[e("h3",H,m(s.description||"Unnamed Team"),1),s.manager?(n(),i("div",N,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-500 mb-1"},"Manager:",-1)),e("div",D,[e("div",S,[e("span",L,m(((d=s.manager.first_name)==null?void 0:d[0])||((g=s.manager.username)==null?void 0:g[0])||"M"),1)]),e("div",null,[e("p",R,m(s.manager.first_name)+" "+m(s.manager.last_name),1),e("p",U,m(s.manager.email),1)])])])):p("",!0),e("div",A,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 mb-1"},"Members:",-1)),e("span",F,m(((x=s.employees)==null?void 0:x.length)||0)+" members ",1)])])]),e("div",E,[o.canManageTeam(s)?(n(),i("button",{key:0,onClick:h=>l.$router.push(`/teams/${s.id}`),class:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),f(" Manage ",-1)])],8,I)):p("",!0),o.canViewTeamData(s)?(n(),i("button",{key:1,onClick:h=>l.$router.push(`/teams/${s.id}/data`),class:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700"},[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),f(" Data ",-1)])],8,J)):p("",!0)])])])}),128))])):(n(),i("div",O,[...t[7]||(t[7]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No teams",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating your first team.",-1)])]))])}const W=y(_,[["render",G]]);export{W as default};
