import{h as c}from"./http-f1abb376.js";import{r as m,f as u,g as B,o as i,c as l,a as e,n as x,t as a,F as D,i as E}from"./index-621cd5fc.js";const g="/api/timesheet_approvals",h={list:()=>c.get(g),get:d=>c.get(`${g}/${d}`),approve:(d,o="")=>c.post(`${g}/${d}/approve`,{notes:o}),reject:(d,o="")=>c.post(`${g}/${d}/reject`,{notes:o})},P={class:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8"},F={class:"max-w-7xl mx-auto"},R={class:"mb-8"},L={class:"flex items-center justify-between"},M={class:"mb-6"},N={class:"border-b border-gray-200"},U={class:"-mb-px flex space-x-8"},V={class:"bg-white rounded-xl shadow-sm border border-gray-200"},z={key:0,class:"p-8 text-center text-gray-500"},H={key:1,class:"p-8 text-center text-gray-500"},I={key:2,class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200"},q={class:"bg-white divide-y divide-gray-200"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ee={key:0,class:"flex space-x-2"},te=["onClick"],se=["onClick"],re={key:1,class:"text-gray-400"},ne={__name:"TimesheetApprovalView",setup(d){const o=m([]),y=m(!1),n=m("pending"),f=u(()=>o.value.filter(t=>t.status===n.value)),w=u(()=>o.value.filter(t=>t.status==="pending").length),k=u(()=>o.value.filter(t=>t.status==="approved").length),j=u(()=>o.value.filter(t=>t.status==="rejected").length);B(()=>{v()});const v=async()=>{y.value=!0;try{const t=await h.list();o.value=t.data||[]}catch(t){console.error("Error loading timesheets:",t)}finally{y.value=!1}},$=async t=>{if(confirm("Are you sure you want to approve this timesheet?"))try{await h.approve(t),await v(),alert("Timesheet approved successfully!")}catch(r){console.error("Error approving timesheet:",r),alert("Failed to approve timesheet. Please try again.")}},C=async t=>{const r=prompt("Please provide a reason for rejection (optional):");if(r!==null)try{await h.reject(t,r),await v(),alert("Timesheet rejected successfully!")}catch(s){console.error("Error rejecting timesheet:",s),alert("Failed to reject timesheet. Please try again.")}},A=t=>new Date(t).toLocaleDateString(),p=t=>{if(!t)return"0:00";const r=Math.floor(t),s=Math.round((t-r)*60);return`${r}:${String(s).padStart(2,"0")}`},T=t=>{switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(t,r)=>(i(),l("section",P,[e("div",F,[e("div",R,[e("div",L,[r[4]||(r[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Timesheet Approvals"),e("p",{class:"text-gray-600"},"Review and approve employee timesheets")],-1)),e("button",{onClick:r[0]||(r[0]=s=>t.$router.push("/dashboard")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Back to Dashboard ")])]),e("div",M,[e("div",N,[e("nav",U,[e("button",{onClick:r[1]||(r[1]=s=>n.value="pending"),class:x(["py-2 px-1 border-b-2 font-medium text-sm",n.value==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Pending ("+a(w.value)+") ",3),e("button",{onClick:r[2]||(r[2]=s=>n.value="approved"),class:x(["py-2 px-1 border-b-2 font-medium text-sm",n.value==="approved"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Approved ("+a(k.value)+") ",3),e("button",{onClick:r[3]||(r[3]=s=>n.value="rejected"),class:x(["py-2 px-1 border-b-2 font-medium text-sm",n.value==="rejected"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Rejected ("+a(j.value)+") ",3)])])]),e("div",V,[y.value?(i(),l("div",z," Loading timesheets... ")):f.value.length===0?(i(),l("div",H," No "+a(n.value)+" timesheets found ",1)):(i(),l("div",I,[e("table",O,[r[5]||(r[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Scheduled"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actual"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Break"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Overtime"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",q,[(i(!0),l(D,null,E(f.value,s=>{var b,_;return i(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",G,a(((b=s.user)==null?void 0:b.first_name)||"Unknown")+" "+a(((_=s.user)==null?void 0:_.last_name)||"User"),1),e("td",J,a(A(s.start)),1),e("td",K,a(p(s.scheduled_hours)),1),e("td",Q,a(p(s.actual_hours)),1),e("td",W,a(p(s.break_hours)),1),e("td",X,a(p(s.overtime_hours)),1),e("td",Y,[e("span",{class:x(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",T(s.status)])},a(s.status),3)]),e("td",Z,[s.status==="pending"?(i(),l("div",ee,[e("button",{onClick:S=>$(s.id),class:"text-green-600 hover:text-green-900"}," Approve ",8,te),e("button",{onClick:S=>C(s.id),class:"text-red-600 hover:text-red-900"}," Reject ",8,se)])):(i(),l("span",re,a(s.status==="approved"?"Approved":"Rejected"),1))])])}),128))])])]))])])]))}};export{ne as default};
