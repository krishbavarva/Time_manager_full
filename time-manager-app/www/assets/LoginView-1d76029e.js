import{u as A,r as g,o as u,c,a as t,_ as S,t as v,b as w,d as h,w as b,v as y,n as B,e as p}from"./index-621cd5fc.js";import{u as M}from"./users-a5fc0dd3.js";import{h as V}from"./http-f1abb376.js";const U={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4 relative overflow-hidden"},L={class:"w-full max-w-md relative z-10"},j={class:"text-center mb-8"},T={key:0,class:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg"},E={class:"flex"},P={class:"ml-3"},D={class:"text-sm font-medium text-green-800"},N={key:0,class:"text-sm text-green-700 mt-1"},H={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 overflow-hidden"},I={class:"p-8"},F={class:"space-y-6"},R={class:"relative"},q={class:"relative"},J={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-xl"},O={class:"flex items-center"},W={class:"text-sm text-red-700"},G=["disabled"],K={key:0,class:"h-6 w-6 mr-3 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Q={key:1,class:"animate-spin h-6 w-6 mr-3",fill:"none",viewBox:"0 0 24 24"},ee={__name:"LoginView",setup(X){const k=A(),l=g(""),f=g(!1),m=g(null),i=g(!1),o=g({identifier:"",password:""}),_=async()=>{if(l.value="",f.value=!1,i.value=!0,!o.value.identifier||!o.value.password){l.value="Please enter both email/username and password",i.value=!1;return}try{if(!await C(o.value.identifier,o.value.password)){l.value="Invalid email/username or password",i.value=!1;return}const e=await z(o.value.identifier);e&&(localStorage.setItem("currentUser",JSON.stringify(e)),m.value=e,window.refreshUserState&&window.refreshUserState()),f.value=!0,setTimeout(()=>k.push("/dashboard"),1500)}catch(s){console.error("Login error:",s),l.value=s.message||"An error occurred during login. Please try again."}finally{i.value=!1}},C=async(s,e)=>{var n;try{const r=await V.post("/api/sessions",{email:s,password:e});return(n=r==null?void 0:r.data)!=null&&n.token?(localStorage.setItem("authToken",r.data.token),!0):!1}catch(r){throw console.error("Authentication error:",r),r}},z=async s=>{try{const e=await M.list(),r=(Array.isArray(e)?e:Array.isArray(e==null?void 0:e.data)?e.data:[]).find(a=>{var d,x;return a.email===s||a.username===s||((d=a.email)==null?void 0:d.toLowerCase())===s.toLowerCase()||((x=a.username)==null?void 0:x.toLowerCase())===s.toLowerCase()});return r?{id:r.id,email:r.email,username:r.username,first_name:r.first_name,last_name:r.last_name,role:r.role}:null}catch(e){throw console.error("Failed to get user data:",e),e}};return(s,e)=>{var n,r,a;return u(),c("div",U,[e[16]||(e[16]=t("div",{class:"absolute inset-0 overflow-hidden"},[t("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-purple-400/20 rounded-full blur-3xl"}),t("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-3xl"})],-1)),t("div",L,[t("div",j,[e[4]||(e[4]=t("div",{class:"mx-auto w-20 h-20 rounded-3xl overflow-hidden mb-6 shadow-2xl"},[t("img",{src:S,alt:"Timemanager Logo",class:"w-full h-full object-cover"})],-1)),e[5]||(e[5]=t("h1",{class:"text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3"},"Timemanager",-1)),e[6]||(e[6]=t("p",{class:"text-gray-600 text-lg"},"Sign in to access your dashboard",-1)),f.value?(u(),c("div",T,[t("div",E,[e[3]||(e[3]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),t("div",P,[t("p",D," Welcome back, "+v(((n=m.value)==null?void 0:n.first_name)||((r=m.value)==null?void 0:r.username)||"User")+"! ",1),(a=m.value)!=null&&a.role?(u(),c("p",N," Role: "+v(m.value.role.toUpperCase()),1)):w("",!0),e[2]||(e[2]=h('<p class="text-sm text-green-700 mt-2"><span class="inline-flex items-center"><svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Redirecting... </span></p>',1))])])])):w("",!0)]),t("div",H,[t("div",I,[t("div",F,[t("div",null,[e[8]||(e[8]=t("label",{for:"login_identifier",class:"block text-sm font-semibold text-gray-700 mb-3"}," Email or Username ",-1)),t("div",R,[b(t("input",{id:"login_identifier","onUpdate:modelValue":e[0]||(e[0]=d=>o.value.identifier=d),type:"text",required:"",class:"w-full px-6 py-4 bg-white/80 backdrop-blur-sm border border-white/20 rounded-2xl shadow-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 text-lg placeholder-gray-500",placeholder:"Enter your email or username"},null,512),[[y,o.value.identifier]]),e[7]||(e[7]=t("div",{class:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])]),t("div",null,[e[10]||(e[10]=t("label",{for:"login_password",class:"block text-sm font-semibold text-gray-700 mb-3"}," Password ",-1)),t("div",q,[b(t("input",{id:"login_password","onUpdate:modelValue":e[1]||(e[1]=d=>o.value.password=d),type:"password",required:"",class:"w-full px-6 py-4 bg-white/80 backdrop-blur-sm border border-white/20 rounded-2xl shadow-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 text-lg placeholder-gray-500",placeholder:"Enter your password"},null,512),[[y,o.value.password]]),e[9]||(e[9]=t("div",{class:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1))])]),l.value?(u(),c("div",J,[t("div",O,[e[11]||(e[11]=t("svg",{class:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",W,v(l.value),1)])])):w("",!0),t("div",null,[t("button",{type:"submit",onClick:_,class:B(["group w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-2xl shadow-xl text-lg font-semibold text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl",{"opacity-75 cursor-not-allowed":!o.value.identifier||!o.value.password||i.value}]),disabled:!o.value.identifier||!o.value.password||i.value},[i.value?(u(),c("svg",Q,[...e[13]||(e[13]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(u(),c("svg",K,[...e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"},null,-1)])])),p(" "+v(i.value?"Signing in...":"Sign in"),1)],10,G)]),e[14]||(e[14]=h('<div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-xl"><h4 class="text-sm font-semibold text-blue-800 mb-2">Demo Credentials:</h4><div class="space-y-1 text-xs text-blue-700"><div><strong>Admin:</strong> admin@gmail.com / admin123</div><div><strong>Employee:</strong> krishbavarva168@gmail.com / 123456</div><div><strong>Manager:</strong> manager@gmail.com / manager123</div></div></div><div class="text-center"><a href="#" class="text-sm font-medium text-indigo-600 hover:text-indigo-700 transition-colors duration-200"> Forgot your password? </a></div>',2))])]),e[15]||(e[15]=t("div",{class:"bg-gradient-to-r from-gray-50/80 to-gray-100/80 backdrop-blur-sm px-6 py-4 border-t border-white/20"},[t("p",{class:"text-xs text-center text-gray-600"},[p(" By signing in, you agree to our "),t("a",{href:"#",class:"text-indigo-600 hover:text-indigo-500 font-medium"},"Terms"),p(" and "),t("a",{href:"#",class:"text-indigo-600 hover:text-indigo-500 font-medium"},"Privacy Policy"),p(". ")])],-1))])])])}}};export{ee as default};
