const f=typeof import.meta<"u"&&{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&{}.VITE_API_BASE_URL||"",a=(e,t)=>{const i=`${f.replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`;if(!t)return i;const n=new URLSearchParams;Object.entries(t).forEach(([h,r])=>{r!=null&&(Array.isArray(r)?r.forEach(u=>n.append(h,u)):n.append(h,r))});const o=n.toString();return o?`${i}?${o}`:i},c=async e=>{const t=await e,n=(t.headers.get("content-type")||"").includes("application/json")?await t.json().catch(()=>({})):await t.text().catch(()=>"");if(!t.ok){const o=new Error(`HTTP ${t.status} ${t.statusText}`);throw o.status=t.status,o.body=n,typeof console<"u"&&console.error("HTTP error",{url:t.url,status:t.status,body:n}),o}return n},d=()=>({"Content-Type":"application/json",Accept:"application/json",...p()}),l=()=>({Accept:"application/json",...p()}),p=()=>{const e=localStorage.getItem("authToken");return e?{Authorization:`Bearer ${e}`}:{}},y={get:(e,{query:t,headers:s}={})=>c(fetch(a(e,t),{headers:{...l(),...s||{}}})),post:(e,t,{headers:s}={})=>c(fetch(a(e),{method:"POST",headers:{...d(),...s||{}},body:t?JSON.stringify(t):void 0})),put:(e,t,{headers:s}={})=>c(fetch(a(e),{method:"PUT",headers:{...d(),...s||{}},body:JSON.stringify(t)})),patch:(e,t,{headers:s}={})=>c(fetch(a(e),{method:"PATCH",headers:{...d(),...s||{}},body:JSON.stringify(t)})),delete:(e,{headers:t}={})=>c(fetch(a(e),{method:"DELETE",headers:{...d(),...t||{}}}))};export{y as h};
