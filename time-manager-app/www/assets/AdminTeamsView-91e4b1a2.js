import{t as c}from"./teams-0f7ee716.js";import{u as E}from"./users-a5fc0dd3.js";import{x as C,o as i,c as r,a as e,e as M,n as A,t as n,F as h,i as x,j as w,w as b,k as T,b as u,v as _,l as I,C as U}from"./index-621cd5fc.js";import"./http-f1abb376.js";const D={name:"AdminTeamsView",data(){return{allTeamsData:null,availableManagers:[],availableEmployees:[],loading:!1,assigning:!1,creating:!1,editing:!1,managingEmployees:!1,showManagerModal:!1,showCreateModal:!1,showEditModal:!1,showManageEmployeesModal:!1,showAssignManagersModal:!1,selectedTeam:null,selectedManagerId:"",selectedManagers:[],selectedEmployees:[],newTeam:{description:"",manager_id:""},editTeam:{id:"",description:""}}},computed:{totalMembers(){return this.allTeamsData?this.allTeamsData.reduce((o,s)=>{var d;return o+(((d=s.employees)==null?void 0:d.length)||0)},0):0},totalManagers(){return this.allTeamsData?this.allTeamsData.filter(o=>o.manager).length:0},totalHours(){return 0}},async created(){await this.loadAllTeamsData(),await this.loadAvailableManagers(),await this.loadAvailableEmployees()},methods:{async loadAllTeamsData(){var o;try{this.loading=!0;const s=await c.getAllTeamsData();this.allTeamsData=s.data||[]}catch(s){console.error("Error loading teams data:",s),(o=this.$toast)==null||o.error("Failed to load teams data"),this.allTeamsData=[]}finally{this.loading=!1}},async loadAvailableManagers(){try{const o=await E.list();this.availableManagers=(o.data||[]).filter(s=>["admin","manager"].includes(s.role))}catch(o){console.error("Error loading managers:",o)}},calculateTeamHours(o){return o?o.reduce((s,d)=>s+(d.total_hours||0),0):0},getTeamManagers(o){return o.manager?[o.manager]:[]},showAssignManagerModal(o){var s;this.selectedTeam=o,this.selectedManagerId=((s=o.manager)==null?void 0:s.id)||"",this.showManagerModal=!0},closeManagerModal(){this.showManagerModal=!1,this.selectedTeam=null,this.selectedManagerId=""},closeCreateModal(){this.showCreateModal=!1,this.newTeam={description:"",manager_id:""}},showEditTeamModal(o){this.selectedTeam=o,this.editTeam={id:o.id,description:o.description||""},this.showEditModal=!0},closeEditModal(){this.showEditModal=!1,this.selectedTeam=null,this.editTeam={id:"",description:""}},openManageEmployeesModal(o,s){console.log("Manage Employees button clicked for team:",o),console.log("Current members:",s),this.selectedTeam=o,this.selectedEmployees=s?s.map(d=>d.id):[],this.showManageEmployeesModal=!0,console.log("showManageEmployeesModal set to:",this.showManageEmployeesModal)},closeManageEmployeesModal(){this.showManageEmployeesModal=!1,this.selectedTeam=null,this.selectedEmployees=[]},openAssignManagersModal(o){var s;console.log("Assign Managers button clicked for team:",o),console.log("Current team manager:",o.manager),this.selectedTeam=o,this.selectedManagerId=((s=o.manager)==null?void 0:s.id)||null,console.log("Selected Manager ID:",this.selectedManagerId),this.showAssignManagersModal=!0,console.log("showAssignManagersModal set to:",this.showAssignManagersModal)},closeAssignManagersModal(){this.showAssignManagersModal=!1,this.selectedTeam=null,this.selectedManagerId=null},async createTeam(){var o,s;try{this.creating=!0,await c.create(this.newTeam),this.closeCreateModal(),await this.loadAllTeamsData(),(o=this.$toast)==null||o.success("Team created successfully")}catch(d){console.error("Error creating team:",d),(s=this.$toast)==null||s.error("Failed to create team")}finally{this.creating=!1}},async editTeam(){var o,s;try{this.editing=!0,await c.update(this.editTeam.id,{description:this.editTeam.description}),this.closeEditModal(),await this.loadAllTeamsData(),(o=this.$toast)==null||o.success("Team updated successfully")}catch(d){console.error("Error updating team:",d),(s=this.$toast)==null||s.error("Failed to update team")}finally{this.editing=!1}},async manageEmployees(){var o,s,d,y;try{if(this.managingEmployees=!0,console.log("Managing employees for team:",this.selectedTeam.id),console.log("Selected employees:",this.selectedEmployees),!this.selectedTeam||!this.selectedTeam.id)throw new Error("No team selected");const l=(this.selectedTeam.employees||[]).map(m=>m.id),f=this.selectedEmployees.filter(m=>!l.includes(m)),v=l.filter(m=>!this.selectedEmployees.includes(m));console.log("Employees to add:",f),console.log("Employees to remove:",v);for(const m of f)try{await c.addEmployee(this.selectedTeam.id,m),console.log("Added employee:",m)}catch(t){console.error("Failed to add employee:",m,t),(o=this.$toast)==null||o.error("Failed to add employee to team")}for(const m of v)try{await c.removeEmployee(this.selectedTeam.id,m),console.log("Removed employee:",m)}catch(t){console.error("Failed to remove employee:",m,t),(s=this.$toast)==null||s.error("Failed to remove employee from team")}this.closeManageEmployeesModal(),await this.loadAllTeamsData(),(d=this.$toast)==null||d.success("Employee management updated successfully")}catch(a){console.error("Error managing employees:",a),(y=this.$toast)==null||y.error("Failed to update employee management")}finally{this.managingEmployees=!1}},async assignManagers(){var o,s,d,y,a;try{if(this.assigning=!0,console.log("Assigning manager:",this.selectedManagerId,"to team:",this.selectedTeam.id),this.selectedManagerId){const l=await c.assignManager(this.selectedTeam.id,this.selectedManagerId);console.log("Assign manager response:",l)}else{const l=await c.removeManager(this.selectedTeam.id);console.log("Remove manager response:",l)}this.closeAssignManagersModal(),await this.loadAllTeamsData(),(o=this.$toast)==null||o.success("Manager assignment updated successfully")}catch(l){console.error("Error assigning managers:",l),console.error("Error details:",(s=l.response)==null?void 0:s.data),(a=this.$toast)==null||a.error("Failed to assign manager: "+(((y=(d=l.response)==null?void 0:d.data)==null?void 0:y.error)||l.message))}finally{this.assigning=!1}},async assignManager(){var o,s;try{this.assigning=!0,this.selectedManagerId?await c.assignManager(this.selectedTeam.id,this.selectedManagerId):await c.removeManager(this.selectedTeam.id),this.closeManagerModal(),await this.loadAllTeamsData(),(o=this.$toast)==null||o.success("Manager assignment updated")}catch(d){console.error("Error assigning manager:",d),(s=this.$toast)==null||s.error("Failed to assign manager")}finally{this.assigning=!1}}}},j={class:"p-6 max-w-7xl mx-auto bg-white"},H={class:"flex items-center justify-between mb-6"},V={class:"flex gap-3"},F=["disabled"],N={key:0,class:"flex justify-center items-center py-12"},z={key:1,class:"space-y-6"},S={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},B={class:"bg-blue-50 p-4 rounded-lg"},R={class:"flex items-center"},q={class:"ml-3"},L={class:"text-2xl font-semibold text-blue-900"},G={class:"bg-green-50 p-4 rounded-lg"},J={class:"flex items-center"},K={class:"ml-3"},O={class:"text-2xl font-semibold text-green-900"},P={class:"bg-purple-50 p-4 rounded-lg"},Q={class:"flex items-center"},W={class:"ml-3"},X={class:"text-2xl font-semibold text-purple-900"},Y={class:"bg-yellow-50 p-4 rounded-lg"},Z={class:"flex items-center"},$={class:"ml-3"},ee={class:"text-2xl font-semibold text-yellow-900"},se={class:"bg-white border border-gray-200 rounded-lg shadow-sm"},te={class:"p-6"},ae={class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200"},le={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-4 whitespace-nowrap"},re={class:"text-sm font-medium text-gray-900"},ne={class:"text-sm text-gray-500"},de={class:"px-6 py-4"},me={key:0,class:"space-y-1"},ge={key:1,class:"text-sm text-gray-500 italic"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ue={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},pe={class:"flex flex-wrap gap-1"},ye=["onClick"],he=["onClick"],xe=["onClick"],be=["onClick"],fe={key:2,class:"text-center py-12"},ve={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Me={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},we={class:"mt-3"},Te={class:"text-sm text-gray-900 bg-gray-50 p-2 rounded"},_e=["value"],ke={class:"flex justify-end space-x-3 pt-4"},Ee=["disabled"],Ce={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Ae={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Ie={class:"mt-3"},Ue=["value"],De={class:"flex justify-end space-x-3 pt-4"},je=["disabled"],He={key:5,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Ve={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Fe={class:"mt-3"},Ne={class:"flex justify-end space-x-3 pt-4"},ze=["disabled"],Se={key:6,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Be={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Re={class:"mt-3"},qe={class:"mb-4"},Le={class:"text-sm text-gray-900 bg-gray-50 p-2 rounded"},Ge={class:"mb-4"},Je={class:"block text-sm font-medium text-gray-700 mb-2"},Ke={key:0,class:"max-h-40 overflow-y-auto border border-gray-300 rounded-md"},Oe=["value"],Pe={class:"text-sm text-gray-900"},Qe={key:1,class:"text-sm text-gray-500 italic"},We={class:"flex justify-end space-x-3 pt-4"},Xe=["disabled"],Ye={key:7,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Ze={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},$e={class:"mt-3"},es={class:"mb-4"},ss={class:"text-sm text-gray-900 bg-gray-50 p-2 rounded"},ts={class:"mb-4"},as={key:0,class:"max-h-60 overflow-y-auto border border-gray-300 rounded-md"},os=["id","value"],ls=["for"],is={key:0,class:"text-xs text-gray-500 ml-2"},rs={key:1,class:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},ns={key:1,class:"text-sm text-gray-500 italic"},ds={class:"flex justify-end space-x-3 pt-4"},ms=["disabled"];function gs(o,s,d,y,a,l){var f,v,m;return i(),r("section",j,[e("div",H,[s[21]||(s[21]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Admin Team Management"),e("p",{class:"text-gray-600 mt-1"},"Manage all teams, assign managers, and view comprehensive data")],-1)),e("div",V,[e("button",{onClick:s[0]||(s[0]=t=>a.showCreateModal=!0),class:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700"},[...s[19]||(s[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),M(" Create Team ",-1)])]),e("button",{onClick:s[1]||(s[1]=(...t)=>l.loadAllTeamsData&&l.loadAllTeamsData(...t)),disabled:a.loading,class:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 disabled:opacity-50"},[(i(),r("svg",{class:A(["w-4 h-4",{"animate-spin":a.loading}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[20]||(s[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),M(" "+n(a.loading?"Loading...":"Refresh"),1)],8,F)])]),a.loading?(i(),r("div",N,[...s[22]||(s[22]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)])])):a.allTeamsData&&a.allTeamsData.length>0?(i(),r("div",z,[e("div",S,[e("div",B,[e("div",R,[s[24]||(s[24]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",q,[s[23]||(s[23]=e("p",{class:"text-sm font-medium text-blue-800"},"Total Teams",-1)),e("p",L,n(a.allTeamsData.length),1)])])]),e("div",G,[e("div",J,[s[26]||(s[26]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",K,[s[25]||(s[25]=e("p",{class:"text-sm font-medium text-green-800"},"Total Members",-1)),e("p",O,n(l.totalMembers),1)])])]),e("div",P,[e("div",Q,[s[28]||(s[28]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",W,[s[27]||(s[27]=e("p",{class:"text-sm font-medium text-purple-800"},"Managers",-1)),e("p",X,n(l.totalManagers),1)])])]),e("div",Y,[e("div",Z,[s[30]||(s[30]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",$,[s[29]||(s[29]=e("p",{class:"text-sm font-medium text-yellow-800"},"Total Hours",-1)),e("p",ee,n(l.totalHours.toFixed(1))+"h",1)])])])]),e("div",se,[e("div",te,[s[33]||(s[33]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"All Teams",-1)),e("div",ae,[e("table",oe,[s[32]||(s[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Team"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Managers"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Members"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Hours"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",le,[(i(!0),r(h,null,x(a.allTeamsData,t=>{var p;return i(),r("tr",{key:t.id},[e("td",ie,[e("div",re,n(t.description||"Unnamed Team"),1),e("div",ne,"ID: "+n(t.id),1)]),e("td",de,[l.getTeamManagers(t).length>0?(i(),r("div",me,[(i(!0),r(h,null,x(l.getTeamManagers(t),g=>(i(),r("div",{key:g.id,class:"text-sm text-gray-900"},n(g.first_name)+" "+n(g.last_name),1))),128))])):(i(),r("div",ge,"No managers assigned"))]),e("td",ce,n(((p=t.employees)==null?void 0:p.length)||0),1),s[31]||(s[31]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"}," N/A ",-1)),e("td",ue,[e("div",pe,[e("button",{onClick:g=>o.$router.push(`/teams/${t.id}`),class:"text-indigo-600 hover:text-indigo-900 text-xs px-2 py-1",title:"Manage Team"}," Manage ",8,ye),e("button",{onClick:g=>o.$router.push(`/teams/${t.id}/data`),class:"text-green-600 hover:text-green-900 text-xs px-2 py-1",title:"View Data"}," Data ",8,he),e("button",{onClick:g=>l.showEditTeamModal(t),class:"text-blue-600 hover:text-blue-900 text-xs px-2 py-1",title:"Edit Team"}," Edit ",8,xe),e("button",{onClick:g=>l.openAssignManagersModal(t),class:"text-orange-600 hover:text-orange-900 text-xs px-2 py-1",title:"Assign Managers"}," Assign ",8,be)])])])}),128))])])])])])])):(i(),r("div",fe,[...s[34]||(s[34]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No teams found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"No teams have been created yet.",-1)])])),a.showManagerModal?(i(),r("div",ve,[e("div",Me,[e("div",we,[s[38]||(s[38]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Assign Manager",-1)),e("form",{onSubmit:s[4]||(s[4]=w((...t)=>l.assignManager&&l.assignManager(...t),["prevent"])),class:"space-y-4"},[e("div",null,[s[35]||(s[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team",-1)),e("p",Te,n(((f=a.selectedTeam)==null?void 0:f.description)||"Unnamed Team"),1)]),e("div",null,[s[37]||(s[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Manager",-1)),b(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.selectedManagerId=t),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[s[36]||(s[36]=e("option",{value:""},"Select a manager",-1)),(i(!0),r(h,null,x(a.availableManagers,t=>(i(),r("option",{key:t.id,value:t.id},n(t.first_name)+" "+n(t.last_name)+" ("+n(t.username)+") ",9,_e))),128))],512),[[T,a.selectedManagerId]])]),e("div",ke,[e("button",{type:"button",onClick:s[3]||(s[3]=(...t)=>l.closeManagerModal&&l.closeManagerModal(...t)),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:a.assigning,class:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50"},n(a.assigning?"Assigning...":"Assign Manager"),9,Ee)])],32)])])])):u("",!0),a.showCreateModal?(i(),r("div",Ce,[e("div",Ae,[e("div",Ie,[s[42]||(s[42]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New Team",-1)),e("form",{onSubmit:s[8]||(s[8]=w((...t)=>l.createTeam&&l.createTeam(...t),["prevent"])),class:"space-y-4"},[e("div",null,[s[39]||(s[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team Name",-1)),b(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>a.newTeam.description=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter team name"},null,512),[[_,a.newTeam.description]])]),e("div",null,[s[41]||(s[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Manager",-1)),b(e("select",{"onUpdate:modelValue":s[6]||(s[6]=t=>a.newTeam.manager_id=t),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[s[40]||(s[40]=e("option",{value:""},"Select a manager",-1)),(i(!0),r(h,null,x(a.availableManagers,t=>(i(),r("option",{key:t.id,value:t.id},n(t.first_name)+" "+n(t.last_name)+" ("+n(t.username)+") ",9,Ue))),128))],512),[[T,a.newTeam.manager_id]])]),e("div",De,[e("button",{type:"button",onClick:s[7]||(s[7]=(...t)=>l.closeCreateModal&&l.closeCreateModal(...t)),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:a.creating,class:"px-4 py-2 bg-indigo-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-50"},n(a.creating?"Creating...":"Create Team"),9,je)])],32)])])])):u("",!0),a.showEditModal?(i(),r("div",He,[e("div",Ve,[e("div",Fe,[s[44]||(s[44]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit Team",-1)),e("form",{onSubmit:s[11]||(s[11]=w((...t)=>l.editTeam&&l.editTeam(...t),["prevent"])),class:"space-y-4"},[e("div",null,[s[43]||(s[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team Name",-1)),b(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>l.editTeam.description=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter team name"},null,512),[[_,l.editTeam.description]])]),e("div",Ne,[e("button",{type:"button",onClick:s[10]||(s[10]=(...t)=>l.closeEditModal&&l.closeEditModal(...t)),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:a.editing,class:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50"},n(a.editing?"Updating...":"Update Team"),9,ze)])],32)])])])):u("",!0),a.showManageEmployeesModal?(i(),r("div",Se,[e("div",Be,[e("div",Re,[s[46]||(s[46]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Manage Team Members",-1)),e("div",qe,[s[45]||(s[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team",-1)),e("p",Le,n(((v=a.selectedTeam)==null?void 0:v.description)||"Unnamed Team"),1)]),e("div",Ge,[e("label",Je,"Current Members ("+n(a.selectedEmployees.length)+")",1),a.availableEmployees.length>0?(i(),r("div",Ke,[(i(!0),r(h,null,x(a.availableEmployees,t=>(i(),r("div",{key:t.id,class:"flex items-center p-2"},[b(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":s[12]||(s[12]=p=>a.selectedEmployees=p),class:"mr-2"},null,8,Oe),[[I,a.selectedEmployees]]),e("label",Pe,n(t.first_name&&t.last_name?`${t.first_name} ${t.last_name}`:t.username||"Unknown Employee"),1)]))),128))])):(i(),r("p",Qe,"No employees available"))]),e("div",We,[e("button",{type:"button",onClick:s[13]||(s[13]=(...t)=>l.closeManageEmployeesModal&&l.closeManageEmployeesModal(...t)),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:s[14]||(s[14]=(...t)=>l.manageEmployees&&l.manageEmployees(...t)),disabled:a.managingEmployees,class:"px-4 py-2 bg-purple-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-purple-700 disabled:opacity-50"},n(a.managingEmployees?"Updating...":"Update Members"),9,Xe)])])])])):u("",!0),a.showAssignManagersModal?(i(),r("div",Ye,[e("div",Ze,[e("div",$e,[s[49]||(s[49]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Assign Team Managers",-1)),e("div",es,[s[47]||(s[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team",-1)),e("p",ss,n(((m=a.selectedTeam)==null?void 0:m.description)||"Unnamed Team"),1)]),e("div",ts,[s[48]||(s[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Manager",-1)),a.availableManagers.length>0?(i(),r("div",as,[(i(!0),r(h,null,x(a.availableManagers,t=>{var p,g;return i(),r("div",{key:t.id,class:"flex items-center p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[b(e("input",{type:"radio",id:"manager-"+t.id,value:t.id,"onUpdate:modelValue":s[15]||(s[15]=k=>a.selectedManagerId=k),class:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500"},null,8,os),[[U,a.selectedManagerId]]),e("label",{for:"manager-"+t.id,class:"text-sm text-gray-900 cursor-pointer flex-1"},[M(n(t.first_name&&t.last_name?`${t.first_name} ${t.last_name}`:t.username||"Unknown Manager")+" ",1),t.email?(i(),r("span",is,"("+n(t.email)+")",1)):u("",!0),((g=(p=a.selectedTeam)==null?void 0:p.manager)==null?void 0:g.id)===t.id?(i(),r("span",rs,"Current")):u("",!0)],8,ls)])}),128))])):(i(),r("p",ns,"No managers available")),a.selectedManagerId?(i(),r("button",{key:2,type:"button",onClick:s[16]||(s[16]=t=>a.selectedManagerId=null),class:"mt-2 text-xs text-red-600 hover:text-red-800"}," Clear Selection (Remove Manager) ")):u("",!0)]),e("div",ds,[e("button",{type:"button",onClick:s[17]||(s[17]=(...t)=>l.closeAssignManagersModal&&l.closeAssignManagersModal(...t)),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"button",onClick:s[18]||(s[18]=(...t)=>l.assignManagers&&l.assignManagers(...t)),disabled:a.assigning,class:"px-4 py-2 bg-orange-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-orange-700 disabled:opacity-50"},n(a.assigning?"Updating...":"Update Managers"),9,ms)])])])])):u("",!0)])}const hs=C(D,[["render",gs]]);export{hs as default};
