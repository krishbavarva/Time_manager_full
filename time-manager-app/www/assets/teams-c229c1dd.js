import{h as t}from"./http-8cebfae0.js";import{u as p}from"./users-adcbd397.js";const l={list:()=>t.get("/api/teams"),get:e=>t.get(`/api/teams/${e}`),create:e=>t.post("/api/teams",{team:e}),update:(e,a)=>t.put(`/api/teams/${e}`,{team:a}),remove:e=>t.delete(`/api/teams/${e}`),getByManager:e=>t.get(`/api/managers/${e}/teams`),addEmployee:async(e,a)=>{const r=await t.get(`/api/teams/${e}`),m=(r.data||r).employees||[];if(!m.find(n=>n.id===a)){const n=[...m.map(o=>o.id),a];return t.put(`/api/teams/${e}`,{team:{employee_ids:n}})}return r},removeEmployee:async(e,a)=>{const r=await t.get(`/api/teams/${e}`),n=((r.data||r).employees||[]).map(o=>o.id).filter(o=>o!==a);return t.put(`/api/teams/${e}`,{team:{employee_ids:n}})},getTeamMemberData:e=>t.get(`/api/teams/${e}/members/data`),assignManager:(e,a)=>t.put(`/api/teams/${e}`,{team:{manager_id:a}}),removeManager:e=>t.put(`/api/teams/${e}`,{team:{manager_id:null}}),getAllTeamsData:()=>t.get("/api/teams"),canCreateTeam:()=>p.isAdmin(),canManageTeam:e=>{var s;const a=JSON.parse(localStorage.getItem("currentUser")||"{}"),r=a.role||"employee";return r==="admin"||r==="manager"&&((s=e==null?void 0:e.manager)==null?void 0:s.id)===a.id},canViewTeamData:e=>{var s,m;const a=JSON.parse(localStorage.getItem("currentUser")||"{}"),r=a.role||"employee";return!!(r==="admin"||r==="manager"&&((s=e==null?void 0:e.manager)==null?void 0:s.id)===a.id||r==="employee"&&((m=e==null?void 0:e.employees)!=null&&m.some(n=>n.id===a.id)))},getCurrentUserRole:()=>p.getCurrentUserRole()};export{l as t};
