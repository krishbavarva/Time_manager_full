import{r as u,f as A,g as $e,A as I,o as r,c as i,a as e,w as v,v as D,k as J,F as K,i as X,t as l,j as Ee,B as Le,b as M,d as Re,n as w,m as O}from"./index-5e39243b.js";import{u as C}from"./users-adcbd397.js";import{t as Fe}from"./teams-c229c1dd.js";import"./http-8cebfae0.js";const Ve={class:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8"},Ae={class:"max-w-7xl mx-auto"},Ie={class:"mb-8"},Me={class:"flex items-center justify-between"},Oe={class:"flex items-center space-x-4"},Pe={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6"},Ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},He=["value"],We={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},Be={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},je={class:"flex items-center"},qe={class:"ml-4"},ze={class:"text-2xl font-bold text-gray-900"},Ye={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Qe={class:"flex items-center"},Ge={class:"ml-4"},Je={class:"text-2xl font-bold text-gray-900"},Ke={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Xe={class:"flex items-center"},Ze={class:"ml-4"},et={class:"text-2xl font-bold text-gray-900"},tt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},st={class:"flex items-center"},ot={class:"ml-4"},lt={class:"text-2xl font-bold text-gray-900"},at={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},nt={key:0,class:"p-8 text-center text-gray-500"},rt={key:1,class:"p-8 text-center text-red-600"},it={key:2,class:"overflow-x-auto -mx-4 sm:mx-0 shadow-md rounded-lg"},dt={class:"min-w-full divide-y divide-gray-200 text-sm sm:text-base"},ut={class:"bg-white divide-y divide-gray-200"},ct={class:"px-6 py-4 whitespace-nowrap"},mt={class:"flex items-center"},pt={class:"flex-shrink-0 h-10 w-10"},gt={class:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center"},xt={class:"text-sm font-medium text-gray-700"},yt={class:"ml-4"},vt={class:"text-sm font-medium text-gray-900"},bt={class:"text-sm text-gray-500"},ft={class:"px-6 py-4 whitespace-nowrap"},_t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap"},wt={class:"flex items-center"},kt={class:"text-sm text-gray-900 capitalize"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ct=["onClick"],Tt={key:1,class:"text-gray-400"},Ut={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},$t={class:"flex items-center space-x-2"},Et=["onClick"],Lt=["onClick"],Rt=["onClick","title"],Ft=["onClick"],Vt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},At={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},It={class:"mt-3"},Mt={class:"text-lg font-medium text-gray-900 mb-4"},Ot={class:"relative"},Pt=["type"],Nt={class:"flex justify-end space-x-3 pt-4"},Ht=["disabled"],Wt={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Bt={class:"relative top-5 mx-auto p-5 border w-full max-w-6xl shadow-lg rounded-md bg-white"},jt={class:"mt-3"},qt={class:"flex items-center justify-between mb-6"},zt={class:"text-xl font-medium text-gray-900"},Yt={class:"mb-6 p-4 bg-gray-50 rounded-lg"},Qt={class:"flex items-center space-x-4"},Gt={class:"flex items-end"},Jt=["disabled"],Kt={key:0,class:"flex justify-center items-center py-8"},Xt={key:1,class:"space-y-6"},Zt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},es={class:"bg-white border border-gray-200 rounded-lg p-4"},ts={class:"space-y-3"},ss={class:"text-sm font-medium"},os={class:"text-sm font-medium"},ls={class:"text-sm font-medium"},as={class:"bg-white border border-gray-200 rounded-lg p-4"},ns={class:"space-y-3"},rs={class:"text-sm font-medium"},is={class:"flex items-center"},ds={class:"text-sm font-medium capitalize"},us={class:"text-sm font-medium"},cs={class:"text-sm font-medium"},ms={class:"bg-white border border-gray-200 rounded-lg p-4"},ps={class:"space-y-3"},gs={class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},xs={class:"p-3 bg-green-50 rounded-lg"},ys={class:"flex items-center gap-2"},vs={class:"text-xs text-gray-600 mt-1"},bs={class:"bg-white border border-gray-200 rounded-lg p-4"},fs={class:"space-y-3"},_s={key:0},hs={class:"text-sm font-medium"},ws={key:1},ks={class:"text-sm font-medium"},Ss={key:2},Ds={class:"bg-white border border-gray-200 rounded-lg p-4"},Cs={class:"font-medium text-gray-900 mb-4"},Ts={key:0,class:"overflow-x-auto"},Us={class:"min-w-full divide-y divide-gray-200"},$s={class:"bg-white divide-y divide-gray-200"},Es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ls={class:"px-6 py-4 whitespace-nowrap"},Rs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Fs={key:0},Vs={key:1,class:"text-gray-400"},As={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Is={key:1,class:"text-center py-8 text-gray-500"},Ms={class:"bg-white border border-gray-200 rounded-lg p-4"},Os={key:0,class:"overflow-x-auto"},Ps={class:"min-w-full divide-y divide-gray-200"},Ns={class:"bg-white divide-y divide-gray-200"},Hs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ws={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},js={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qs={class:"px-6 py-4 whitespace-nowrap"},zs={key:1,class:"text-center py-8 text-gray-500"},Xs={__name:"AdminUsersView",setup(Ys){const L=u([]),T=u([]),Z=u(!1),U=u(""),P=u(!1),N=u(!1),k=u(null),d=u(null),R=u(!1),x=u(new Date().toISOString().split("T")[0]),_=u(15),F=u(!1),c=u({totalHours:"0:00",clockRecords:[],schedule:[],lastLocation:null,lastClockLocation:null,lastClockTime:null}),V=u(""),H=u(""),W=u(""),B=u(""),m=u({first_name:"",last_name:"",email:"",username:"",password:"",role:"employee"}),se=u(JSON.parse(localStorage.getItem("currentUser")||"{}")),re=A(()=>L.value.filter(s=>{const t=!V.value||`${s.first_name} ${s.last_name}`.toLowerCase().includes(V.value.toLowerCase())||s.email.toLowerCase().includes(V.value.toLowerCase()),n=!H.value||s.role===H.value,a=!W.value||ee(s)===W.value,o=!B.value||E(s)===B.value;return t&&n&&a&&o})),ie=A(()=>L.value.filter(s=>s.role==="employee").length),de=A(()=>L.value.filter(s=>s.role==="manager").length),ue=A(()=>T.value.length),ce=A(()=>L.value.filter(s=>E(s)==="clocked_in").length);$e(()=>{$(),me()});const $=async()=>{Z.value=!0;try{const t=(await C.list()).data||[],n=await Promise.all(t.map(async a=>{try{const{clockinsApi:o}=await I(()=>import("./clockins-53d1e946.js"),["assets/clockins-53d1e946.js","assets/http-8cebfae0.js"]),{workingTimesApi:g}=await I(()=>import("./workingTimes-66cf2fe5.js"),["assets/workingTimes-66cf2fe5.js","assets/http-8cebfae0.js"]),b=(await o.listByUser(a.id).catch(()=>({data:[]}))).data||[];if(b.length>0){const h=b[0];a.last_clock_status=h.status,a.last_clock_time=h.time,a.latitude=h.latitude,a.longitude=h.longitude}const y=new Date,q=new Date(y.setDate(y.getDate()-y.getDay())),z=new Date(q);z.setDate(q.getDate()+6);const Q=(await g.list(a.id,q.toISOString(),z.toISOString()).catch(()=>({data:[]}))).data||[];return a.total_hours=Q.reduce((h,S)=>{if(S.start&&S.end){const G=new Date(S.start),f=(new Date(S.end)-G)/(1e3*60*60);return h+f}return h},0),a}catch(o){return console.error(`Error loading data for user ${a.id}:`,o),a}}));L.value=n}catch(s){U.value="Failed to load users",console.error("Error loading users:",s)}finally{Z.value=!1}},me=async()=>{try{const s=await Fe.list();T.value=s.data||[]}catch(s){console.error("Error loading teams:",s)}},pe=async()=>{P.value=!0;try{k.value?await C.update(k.value.id,m.value):await C.create(m.value),await $(),oe()}catch(s){U.value="Failed to save user",console.error("Error saving user:",s)}finally{P.value=!1}},ge=s=>{console.log("Edit user clicked:",s),k.value=s,m.value={first_name:s.first_name||"",last_name:s.last_name||"",email:s.email||"",username:s.username||"",password:"",role:s.role||"employee"},N.value=!1,console.log("editingUser set to:",k.value)},xe=async s=>{console.log("View user details clicked:",s),d.value=s,_.value=s.hourly_rate||15,console.log("selectedUser set to:",d.value),await j()},ye=async s=>{const t=s.role==="manager"?"employee":"manager",n=t==="manager"?"promote":"demote",a=t==="manager"?"promoted":"demoted";if(confirm(`Are you sure you want to ${n} ${s.first_name} ${s.last_name} to ${t.toUpperCase()}?`))try{await C.update(s.id,{role:t}),await $(),O.success(`Successfully ${a} ${s.first_name} ${s.last_name} to ${t.toUpperCase()}`,{title:"Role Updated"})}catch(o){U.value="Failed to update user role",O.error(`Failed to update role for ${s.first_name} ${s.last_name}`,{title:"Update Failed"}),console.error("Error updating user role:",o)}},ve=s=>{confirm(`Are you sure you want to delete ${s.first_name} ${s.last_name}?`)&&be(s)},be=async s=>{try{await C.remove(s.id),await $()}catch(t){U.value="Failed to delete user",console.error("Error deleting user:",t)}},fe=async s=>{try{const t=!s.flexible_time_enabled;await C.update(s.id,{flexible_time_enabled:t}),s.flexible_time_enabled=t,await $(),alert(t?`âœ… Flexible time enabled for ${s.first_name} ${s.last_name}

This user can now work outside scheduled hours without early/late arrival alerts.`:`âš ï¸ Flexible time disabled for ${s.first_name} ${s.last_name}

This user will now receive alerts for early/late arrivals.`)}catch(t){console.error("Error toggling flexible time:",t),alert("Failed to update flexible time permission. Please try again.")}},_e=async s=>{try{if(!_.value||_.value<=0){O.error("Please enter a valid hourly rate");return}await C.update(s.id,{hourly_rate:_.value}),s.hourly_rate=_.value,d.value.hourly_rate=_.value,await $(),O.success(`Hourly rate updated to â‚¬${_.value}/hour for ${s.first_name} ${s.last_name}`)}catch(t){console.error("Error updating hourly rate:",t),O.error("Failed to update hourly rate")}},oe=()=>{N.value=!1,k.value=null,m.value={first_name:"",last_name:"",email:"",username:"",password:"",role:"employee"},R.value=!1},he=()=>{alert("CSV export functionality will be implemented soon!")},we=s=>{alert(`Location view for ${s.first_name} ${s.last_name} will be implemented soon!`)},ee=s=>{console.log("Getting team for user:",s.id,s.first_name,s.last_name),console.log("Available teams:",T.value);const t=T.value.find(a=>{var o;return((o=a.manager)==null?void 0:o.id)===s.id});if(t)return console.log("Found managed team:",t.description),t.description||"Unnamed Team";const n=T.value.find(a=>a.employees&&a.employees.some(o=>o.id===s.id));return n?(console.log("Found employee team:",n.description),n.description||"Unnamed Team"):(console.log("No team found, returning Unassigned"),"Unassigned")},E=s=>{if(s.last_clock_status!==void 0){const t=s.last_clock_time?new Date(s.last_clock_time):null;if(t&&(Date.now()-t.getTime())/36e5<12)return s.last_clock_status?"clocked_in":"clocked_out"}return"clocked_out"},ke=s=>{if(s.total_hours!==void 0){const t=Math.floor(s.total_hours),n=Math.round((s.total_hours-t)*60);return`${t}:${n.toString().padStart(2,"0")}`}return"0:00"},Se=s=>s.last_location?s.last_location:s.latitude&&s.longitude?`${s.latitude.toFixed(2)}, ${s.longitude.toFixed(2)}`:null,j=async()=>{if(d.value){console.log("Loading detailed data for date:",x.value),F.value=!0;try{const{clockinsApi:s}=await I(()=>import("./clockins-53d1e946.js"),["assets/clockins-53d1e946.js","assets/http-8cebfae0.js"]),{workingTimesApi:t}=await I(()=>import("./workingTimes-66cf2fe5.js"),["assets/workingTimes-66cf2fe5.js","assets/http-8cebfae0.js"]),{userSchedulesApi:n}=await I(()=>import("./userSchedules-3305ba19.js"),["assets/userSchedules-3305ba19.js","assets/http-8cebfae0.js"]),a=new Date(x.value+"T00:00:00"),o=new Date(x.value+"T23:59:59"),p=(await s.listByUser(d.value.id,a.toISOString(),o.toISOString()).catch(()=>({data:[]}))).data||[];console.log("Clock records for date:",x.value,p);const y=(await t.list(d.value.id,a.toISOString(),o.toISOString()).catch(()=>({data:[]}))).data||[],z=(await n.listByUser(d.value.id).catch(()=>({data:[]}))).data||[];let Y=0;y.forEach(f=>{if(f.start&&f.end){const te=new Date(f.start),Ue=new Date(f.end);Y+=(Ue-te)/(1e3*60*60)}});const Q=Math.floor(Y),h=Math.round((Y-Q)*60),S=p.find(f=>f.latitude&&f.longitude),G=S?`${S.latitude.toFixed(4)}, ${S.longitude.toFixed(4)}`:null,ne=p.length>0?le(p[0].time):null;c.value={totalHours:`${Q}:${h.toString().padStart(2,"0")}`,clockRecords:p.sort((f,te)=>new Date(te.time)-new Date(f.time)),schedule:z,lastLocation:G,lastClockLocation:G,lastClockTime:ne}}catch(s){console.error("Error loading detailed user data:",s),c.value={totalHours:"0:00",clockRecords:[],schedule:[],lastLocation:null,lastClockLocation:null,lastClockTime:null}}finally{F.value=!1}}},De=s=>{const t=s.target.value,n=new Date;switch(t){case"today":x.value=n.toISOString().split("T")[0];break;case"yesterday":const a=new Date(n);a.setDate(a.getDate()-1),x.value=a.toISOString().split("T")[0];break;case"thisWeek":const o=new Date(n);o.setDate(n.getDate()-n.getDay()),x.value=o.toISOString().split("T")[0];break;case"lastWeek":const g=new Date(n);g.setDate(n.getDate()-n.getDay()-7),x.value=g.toISOString().split("T")[0];break;case"thisMonth":const p=new Date(n.getFullYear(),n.getMonth(),1);x.value=p.toISOString().split("T")[0];break}t&&j()},Ce=s=>s?new Date(s).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"No date selected",le=s=>{if(!s)return"No time";const t=new Date(s),n=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0"),o=t.getFullYear(),g=t.getHours().toString().padStart(2,"0"),p=t.getMinutes().toString().padStart(2,"0"),b=t.getSeconds().toString().padStart(2,"0");return`${n}/${a}/${o}, ${g}:${p}:${b}`},ae=s=>s||"No time",Te=(s,t,n)=>{if(s.status){const a=t.find((o,g)=>g>n&&!o.status);if(a){const o=new Date(s.time),p=(new Date(a.time)-o)/(1e3*60*60),b=Math.floor(p),y=Math.round((p-b)*60);return`${b}:${y.toString().padStart(2,"0")}`}return"In Progress"}return"-"};return(s,t)=>{var n,a;return r(),i("div",Ve,[e("div",Ae,[e("div",Ie,[e("div",Me,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Employee Management"),e("p",{class:"text-gray-600"},"Manage employees, managers, and teams across the organization")],-1)),e("div",Oe,[e("button",{onClick:he,class:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700"}," ðŸ“¤ Export CSV "),e("button",{onClick:t[0]||(t[0]=o=>N.value=!0),class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700"}," âž• Add Employee ")])])]),e("div",Pe,[e("div",Ne,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>V.value=o),type:"text",placeholder:"Search by name, email...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,V.value]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>H.value=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},[...t[19]||(t[19]=[e("option",{value:""},"All Roles",-1),e("option",{value:"employee"},"Employee",-1),e("option",{value:"manager"},"Manager",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[J,H.value]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team",-1)),v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>W.value=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},[t[21]||(t[21]=e("option",{value:""},"All Teams",-1)),(r(!0),i(K,null,X(T.value,o=>(r(),i("option",{key:o.id,value:o.description},l(o.description||"Unnamed Team"),9,He))),128))],512),[[J,W.value]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>B.value=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},[...t[23]||(t[23]=[e("option",{value:""},"All Status",-1),e("option",{value:"clocked_in"},"Clocked In",-1),e("option",{value:"clocked_out"},"Clocked Out",-1)])],512),[[J,B.value]])])])]),e("div",We,[e("div",Be,[e("div",je,[t[26]||(t[26]=e("div",{class:"p-3 bg-blue-100 rounded-lg"},[e("span",{class:"text-2xl"},"ðŸ‘¥")],-1)),e("div",qe,[t[25]||(t[25]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Employees",-1)),e("p",ze,l(ie.value),1)])])]),e("div",Ye,[e("div",Qe,[t[28]||(t[28]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("span",{class:"text-2xl"},"ðŸ‘¨â€ðŸ’¼")],-1)),e("div",Ge,[t[27]||(t[27]=e("p",{class:"text-sm font-medium text-gray-500"},"Managers",-1)),e("p",Je,l(de.value),1)])])]),e("div",Ke,[e("div",Xe,[t[30]||(t[30]=e("div",{class:"p-3 bg-purple-100 rounded-lg"},[e("span",{class:"text-2xl"},"ðŸ¢")],-1)),e("div",Ze,[t[29]||(t[29]=e("p",{class:"text-sm font-medium text-gray-500"},"Teams",-1)),e("p",et,l(ue.value),1)])])]),e("div",tt,[e("div",st,[t[32]||(t[32]=e("div",{class:"p-3 bg-orange-100 rounded-lg"},[e("span",{class:"text-2xl"},"ðŸŸ¢")],-1)),e("div",ot,[t[31]||(t[31]=e("p",{class:"text-sm font-medium text-gray-500"},"Clocked In",-1)),e("p",lt,l(ce.value),1)])])])]),e("div",at,[t[34]||(t[34]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"Employee Directory")],-1)),Z.value?(r(),i("div",nt," Loading employees... ")):U.value?(r(),i("div",rt,l(U.value),1)):(r(),i("div",it,[e("table",dt,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Team"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Working Hours"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Location"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ut,[(r(!0),i(K,null,X(re.value,o=>{var g,p,b;return r(),i("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",ct,[e("div",mt,[e("div",pt,[e("div",gt,[e("span",xt,l((g=o.first_name)==null?void 0:g[0])+l((p=o.last_name)==null?void 0:p[0]),1)])]),e("div",yt,[e("div",vt,l(o.first_name)+" "+l(o.last_name),1),e("div",bt,l(o.email),1)])])]),e("td",ft,[e("span",{class:w(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.role==="admin"?"bg-red-100 text-red-800":o.role==="manager"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},l(((b=o.role)==null?void 0:b.toUpperCase())||"EMPLOYEE"),3)]),e("td",_t,l(ee(o)),1),e("td",ht,[e("div",wt,[e("div",{class:w(["w-2 h-2 rounded-full mr-2",E(o)==="clocked_in"?"bg-green-400":"bg-gray-400"])},null,2),e("span",kt,l(E(o).replace("_"," ")),1)])]),e("td",St,l(ke(o)),1),e("td",Dt,[Se(o)?(r(),i("button",{key:0,onClick:y=>we(o),class:"text-blue-600 hover:text-blue-800"}," ðŸ“ View Location ",8,Ct)):(r(),i("span",Tt,"No location"))]),e("td",Ut,[e("div",$t,[e("button",{onClick:y=>xe(o),class:"text-blue-600 hover:text-blue-800",title:"View Details"}," ðŸ‘ï¸ ",8,Et),e("button",{onClick:y=>ge(o),class:"text-indigo-600 hover:text-indigo-800",title:"Edit"}," âœï¸ ",8,Lt),se.value.id!==o.id&&o.role!=="admin"?(r(),i("button",{key:0,onClick:y=>ye(o),class:w(["font-bold hover:opacity-80 transition-opacity",o.role==="manager"?"text-green-600":"text-purple-600"]),title:o.role==="manager"?"Demote to Employee":"Promote to Manager"},l(o.role==="manager"?"â¬‡ï¸":"â¬†ï¸"),11,Rt)):M("",!0),se.value.id!==o.id?(r(),i("button",{key:1,onClick:y=>ve(o),class:"text-red-600 hover:text-red-800",title:"Delete"}," ðŸ—‘ï¸ ",8,Ft)):M("",!0)])])])}),128))])])]))]),N.value||k.value?(r(),i("div",Vt,[e("div",At,[e("div",It,[e("h3",Mt,l(k.value?"Edit Employee":"Add New Employee"),1),e("form",{onSubmit:Ee(pe,["prevent"]),class:"space-y-4"},[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"First Name",-1)),v(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>m.value.first_name=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,m.value.first_name]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Name",-1)),v(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>m.value.last_name=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,m.value.last_name]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),v(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>m.value.email=o),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,m.value.email]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Username",-1)),v(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>m.value.username=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[D,m.value.username]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password",-1)),e("div",Ot,[v(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>m.value.password=o),type:R.value?"text":"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10"},null,8,Pt),[[Le,m.value.password]]),e("button",{type:"button",onClick:t[10]||(t[10]=o=>R.value=!R.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},l(R.value?"ðŸ™ˆ":"ðŸ‘ï¸"),1)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),v(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>m.value.role=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},[...t[40]||(t[40]=[e("option",{value:"employee"},"employee",-1),e("option",{value:"manager"},"manager",-1),e("option",{value:"admin"},"admin",-1)])],512),[[J,m.value.role]])]),e("div",Nt,[e("button",{type:"button",onClick:oe,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:P.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50"},l(P.value?"Saving...":k.value?"Update":"Create"),9,Ht)])],32)])])])):M("",!0),d.value?(r(),i("div",Wt,[e("div",Bt,[e("div",jt,[e("div",qt,[e("h3",zt,l(d.value.first_name)+" "+l(d.value.last_name)+" - Complete Details ",1),e("button",{onClick:t[12]||(t[12]=o=>d.value=null),class:"text-gray-400 hover:text-gray-600 text-2xl"}," âœ• ")]),e("div",Yt,[e("div",Qt,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"View Data For:",-1)),v(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>x.value=o),type:"date",onInput:j,class:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,544),[[D,x.value]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quick Select:",-1)),e("select",{onChange:De,class:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},[...t[43]||(t[43]=[Re('<option value="">Select Period</option><option value="today">Today</option><option value="yesterday">Yesterday</option><option value="thisWeek">This Week</option><option value="lastWeek">Last Week</option><option value="thisMonth">This Month</option>',6)])],32)]),e("div",Gt,[e("button",{onClick:j,disabled:F.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},l(F.value?"Loading...":"Refresh Data"),9,Jt)])])]),F.value?(r(),i("div",Kt,[...t[45]||(t[45]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(r(),i("div",Xt,[e("div",Zt,[e("div",es,[t[50]||(t[50]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Basic Information",-1)),e("div",ts,[e("div",null,[t[46]||(t[46]=e("label",{class:"text-sm text-gray-500"},"Email",-1)),e("p",ss,l(d.value.email),1)]),e("div",null,[t[47]||(t[47]=e("label",{class:"text-sm text-gray-500"},"Username",-1)),e("p",os,l(d.value.username),1)]),e("div",null,[t[48]||(t[48]=e("label",{class:"text-sm text-gray-500"},"Role",-1)),e("span",{class:w(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",d.value.role==="admin"?"bg-red-100 text-red-800":d.value.role==="manager"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},l(((n=d.value.role)==null?void 0:n.toUpperCase())||"EMPLOYEE"),3)]),e("div",null,[t[49]||(t[49]=e("label",{class:"text-sm text-gray-500"},"Team",-1)),e("p",ls,l(ee(d.value)),1)])])]),e("div",as,[t[55]||(t[55]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Working Statistics",-1)),e("div",ns,[e("div",null,[t[51]||(t[51]=e("label",{class:"text-sm text-gray-500"},"Total Hours (Selected Date)",-1)),e("p",rs,l(c.value.totalHours||"0:00"),1)]),e("div",null,[t[52]||(t[52]=e("label",{class:"text-sm text-gray-500"},"Current Status",-1)),e("div",is,[e("div",{class:w(["w-2 h-2 rounded-full mr-2",E(d.value)==="clocked_in"?"bg-green-400":"bg-gray-400"])},null,2),e("span",ds,l(E(d.value).replace("_"," ")),1)])]),e("div",null,[t[53]||(t[53]=e("label",{class:"text-sm text-gray-500"},"Clock Records Today",-1)),e("p",us,l(((a=c.value.clockRecords)==null?void 0:a.length)||0)+" entries",1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"text-sm text-gray-500"},"Last Clock",-1)),e("p",cs,l(c.value.lastClockTime||"No records"),1)])])]),e("div",ms,[t[58]||(t[58]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Permissions & Salary",-1)),e("div",ps,[e("div",gs,[t[56]||(t[56]=e("div",{class:"flex-1"},[e("label",{class:"font-medium text-gray-900"},"Flexible Work Time"),e("p",{class:"text-xs text-gray-600 mt-1"}," Allow user to work outside scheduled hours without alerts ")],-1)),e("button",{onClick:t[14]||(t[14]=o=>fe(d.value)),class:w(["ml-4 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",d.value.flexible_time_enabled?"bg-blue-600":"bg-gray-200"])},[e("span",{class:w(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",d.value.flexible_time_enabled?"translate-x-5":"translate-x-0"])},null,2)],2)]),e("div",xs,[t[57]||(t[57]=e("label",{class:"font-medium text-gray-900 block mb-2"},"Hourly Rate (â‚¬)",-1)),e("div",ys,[v(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>_.value=o),type:"number",step:"0.01",min:"0",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"15.00"},null,512),[[D,_.value,void 0,{number:!0}]]),e("button",{onClick:t[16]||(t[16]=o=>_e(d.value)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm"}," Update ")]),e("p",vs," Current: â‚¬"+l(d.value.hourly_rate||15)+"/hour | Overtime: â‚¬"+l((d.value.hourly_rate||15)*2)+"/hour ",1)])])]),e("div",bs,[t[62]||(t[62]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Location Information",-1)),e("div",fs,[c.value.lastLocation?(r(),i("div",_s,[t[59]||(t[59]=e("label",{class:"text-sm text-gray-500"},"Last Known Location",-1)),e("p",hs,l(c.value.lastLocation),1)])):M("",!0),c.value.lastClockLocation?(r(),i("div",ws,[t[60]||(t[60]=e("label",{class:"text-sm text-gray-500"},"Last Clock Location",-1)),e("p",ks,l(c.value.lastClockLocation),1)])):(r(),i("div",Ss,[...t[61]||(t[61]=[e("p",{class:"text-sm text-gray-500 italic"},"No location data available",-1)])]))])])]),e("div",Ds,[e("h4",Cs,"Clock-in/out Records for "+l(Ce(x.value)),1),c.value.clockRecords&&c.value.clockRecords.length>0?(r(),i("div",Ts,[e("table",Us,[t[63]||(t[63]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date & Time"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Location"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Duration")])],-1)),e("tbody",$s,[(r(!0),i(K,null,X(c.value.clockRecords,(o,g)=>(r(),i("tr",{key:o.id},[e("td",Es,l(le(o.time)),1),e("td",Ls,[e("span",{class:w(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(o.status?"Clock In":"Clock Out"),3)]),e("td",Rs,[o.latitude&&o.longitude?(r(),i("span",Fs,l(o.latitude.toFixed(4))+", "+l(o.longitude.toFixed(4)),1)):(r(),i("span",Vs,"No location"))]),e("td",As,l(Te(o,c.value.clockRecords,g)),1)]))),128))])])])):(r(),i("div",Is," No clock records found for this date "))]),e("div",Ms,[t[65]||(t[65]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Working Schedule",-1)),c.value.schedule&&c.value.schedule.length>0?(r(),i("div",Os,[e("table",Ps,[t[64]||(t[64]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Day"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Scheduled Start"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Scheduled End"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Scheduled Hours"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status")])],-1)),e("tbody",Ns,[(r(!0),i(K,null,X(c.value.schedule,o=>(r(),i("tr",{key:o.id},[e("td",Hs,l(o.day_of_week),1),e("td",Ws,l(ae(o.scheduled_start_time)),1),e("td",Bs,l(ae(o.scheduled_end_time)),1),e("td",js,l(o.scheduled_hours)+"h ",1),e("td",qs,[e("span",{class:w(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},l(o.is_active?"Active":"Inactive"),3)])]))),128))])])])):(r(),i("div",zs," No working schedule found "))])]))])])])):M("",!0)])])}}};export{Xs as default};
